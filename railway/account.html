<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Account - Helix Collective</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        * { font-family: 'Inter', sans-serif; }
        body { background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0f1419 100%); min-height: 100vh; }
        .glass-card { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); transition: all 0.3s ease; }
        .gradient-text { background: linear-gradient(135deg, #00ffa3 0%, #00bfa5 50%, #667eea 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .tab-button { transition: all 0.2s; }
        .tab-button.active { background: rgba(0, 191, 165, 0.2); border-bottom: 2px solid #00bfa5; }
        .api-key-display { font-family: 'Courier New', monospace; background: rgba(0, 0, 0, 0.3); padding: 12px; border-radius: 8px; }
    </style>
</head>
<body class="text-white">
    <!-- Navigation -->
    <nav class="glass-card sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="text-3xl">ðŸŒ€</div>
                    <div>
                        <h1 class="text-xl font-bold gradient-text">Helix Collective</h1>
                        <p class="text-xs text-gray-400">Account Settings</p>
                    </div>
                </div>
                <div class="flex items-center space-x-6">
                    <a href="dashboard.html" class="hover:text-teal-400 transition">
                        <i class="fas fa-arrow-left mr-2"></i>Dashboard
                    </a>
                    <button onclick="logout()" class="text-red-400 hover:text-red-300 transition">
                        <i class="fas fa-sign-out-alt mr-2"></i>Logout
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-6 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Sidebar -->
            <div class="lg:col-span-1">
                <div class="glass-card rounded-2xl p-6">
                    <!-- User Profile -->
                    <div class="text-center mb-6">
                        <div class="w-24 h-24 rounded-full bg-gradient-to-br from-teal-400 to-blue-600 flex items-center justify-center mx-auto mb-4 text-3xl">
                            <i class="fas fa-user"></i>
                        </div>
                        <h3 class="font-bold text-lg" id="user-name-display">User</h3>
                        <p class="text-gray-400 text-sm" id="user-email-display">user@example.com</p>
                        <div class="mt-3">
                            <span class="px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-teal-500 to-blue-600" id="plan-badge">
                                FREE PLAN
                            </span>
                        </div>
                    </div>

                    <!-- Navigation Tabs -->
                    <div class="space-y-2">
                        <button class="tab-button active w-full text-left px-4 py-3 rounded-lg" onclick="switchTab('overview')">
                            <i class="fas fa-th-large mr-2"></i>Overview
                        </button>
                        <button class="tab-button w-full text-left px-4 py-3 rounded-lg" onclick="switchTab('api')">
                            <i class="fas fa-key mr-2"></i>API Keys
                        </button>
                        <button class="tab-button w-full text-left px-4 py-3 rounded-lg" onclick="switchTab('subscription')">
                            <i class="fas fa-credit-card mr-2"></i>Subscription
                        </button>
                        <button class="tab-button w-full text-left px-4 py-3 rounded-lg" onclick="switchTab('usage')">
                            <i class="fas fa-chart-bar mr-2"></i>Usage
                        </button>
                        <button class="tab-button w-full text-left px-4 py-3 rounded-lg" onclick="switchTab('settings')">
                            <i class="fas fa-cog mr-2"></i>Settings
                        </button>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="lg:col-span-3">
                <!-- Overview Tab -->
                <div id="tab-overview" class="tab-content">
                    <div class="glass-card rounded-2xl p-8 mb-6">
                        <h2 class="text-3xl font-bold mb-6">Welcome Back! ðŸ‘‹</h2>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div class="bg-white/5 rounded-lg p-6">
                                <div class="text-teal-400 text-2xl mb-2">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="text-3xl font-bold mb-1" id="api-requests-today">247</div>
                                <div class="text-gray-400 text-sm">API Requests Today</div>
                            </div>
                            <div class="bg-white/5 rounded-lg p-6">
                                <div class="text-blue-400 text-2xl mb-2">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="text-3xl font-bold mb-1" id="agents-accessed">3</div>
                                <div class="text-gray-400 text-sm">Agents Accessed</div>
                            </div>
                            <div class="bg-white/5 rounded-lg p-6">
                                <div class="text-purple-400 text-2xl mb-2">
                                    <i class="fas fa-calendar"></i>
                                </div>
                                <div class="text-3xl font-bold mb-1" id="days-active">42</div>
                                <div class="text-gray-400 text-sm">Days Active</div>
                            </div>
                        </div>

                        <div class="bg-white/5 rounded-lg p-6">
                            <h3 class="font-semibold mb-4">Quick Actions</h3>
                            <div class="grid grid-cols-2 gap-4">
                                <button onclick="switchTab('api')" class="p-4 bg-white/5 hover:bg-white/10 rounded-lg transition text-left">
                                    <i class="fas fa-key text-teal-400 mb-2"></i>
                                    <div class="font-semibold">View API Keys</div>
                                    <div class="text-xs text-gray-400">Manage credentials</div>
                                </button>
                                <button onclick="window.location.href='pricing.html'" class="p-4 bg-white/5 hover:bg-white/10 rounded-lg transition text-left">
                                    <i class="fas fa-star text-yellow-400 mb-2"></i>
                                    <div class="font-semibold">Upgrade Plan</div>
                                    <div class="text-xs text-gray-400">Unlock more features</div>
                                </button>
                                <button onclick="window.open('https://docs.helixcollective.io')" class="p-4 bg-white/5 hover:bg-white/10 rounded-lg transition text-left">
                                    <i class="fas fa-book text-blue-400 mb-2"></i>
                                    <div class="font-semibold">Read Docs</div>
                                    <div class="text-xs text-gray-400">API documentation</div>
                                </button>
                                <button onclick="window.location.href='dashboard.html'" class="p-4 bg-white/5 hover:bg-white/10 rounded-lg transition text-left">
                                    <i class="fas fa-chart-pie text-green-400 mb-2"></i>
                                    <div class="font-semibold">View Dashboard</div>
                                    <div class="text-xs text-gray-400">Monitor services</div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- API Keys Tab -->
                <div id="tab-api" class="tab-content hidden">
                    <div class="glass-card rounded-2xl p-8">
                        <h2 class="text-2xl font-bold mb-6">API Keys</h2>

                        <div class="mb-6 p-4 bg-blue-500/20 border border-blue-500/50 rounded-lg">
                            <i class="fas fa-info-circle mr-2"></i>
                            Keep your API keys secure. Never share them publicly.
                        </div>

                        <div class="space-y-4">
                            <div class="bg-white/5 rounded-lg p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <div>
                                        <h3 class="font-semibold">Production Key</h3>
                                        <p class="text-gray-400 text-sm">Created 42 days ago</p>
                                    </div>
                                    <span class="px-3 py-1 bg-green-500/20 text-green-400 text-xs font-semibold rounded">ACTIVE</span>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="api-key-display flex-1 text-sm" id="api-key-value">
                                        hx_â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢
                                    </div>
                                    <button onclick="toggleAPIKey()" class="px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition">
                                        <i class="fas fa-eye" id="api-key-toggle-icon"></i>
                                    </button>
                                    <button onclick="copyAPIKey()" class="px-4 py-2 bg-teal-500 hover:bg-teal-600 rounded-lg transition">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>

                            <button onclick="generateNewKey()" class="w-full py-3 px-4 bg-gradient-to-r from-teal-500 to-blue-600 hover:from-teal-600 hover:to-blue-700 rounded-lg font-semibold transition">
                                <i class="fas fa-plus mr-2"></i>Generate New Key
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Subscription Tab -->
                <div id="tab-subscription" class="tab-content hidden">
                    <div class="glass-card rounded-2xl p-8">
                        <h2 class="text-2xl font-bold mb-6">Subscription</h2>

                        <div class="bg-white/5 rounded-lg p-6 mb-6">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <h3 class="text-2xl font-bold" id="current-plan">Free Plan</h3>
                                    <p class="text-gray-400">$0/month</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm text-gray-400">Status</div>
                                    <div class="text-green-400 font-semibold">Active</div>
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <div class="text-sm text-gray-400 mb-1">API Requests</div>
                                    <div class="font-semibold">100 / day</div>
                                </div>
                                <div>
                                    <div class="text-sm text-gray-400 mb-1">Agents</div>
                                    <div class="font-semibold">3 / 11</div>
                                </div>
                            </div>

                            <button onclick="window.location.href='pricing.html'" class="w-full py-3 px-4 bg-gradient-to-r from-teal-500 to-blue-600 hover:from-teal-600 hover:to-blue-700 rounded-lg font-semibold transition">
                                <i class="fas fa-arrow-up mr-2"></i>Upgrade to Pro
                            </button>
                        </div>

                        <div class="bg-white/5 rounded-lg p-6">
                            <h3 class="font-semibold mb-4">Billing History</h3>
                            <div class="text-gray-400 text-sm text-center py-8">
                                No billing history yet
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Usage Tab -->
                <div id="tab-usage" class="tab-content hidden">
                    <div class="glass-card rounded-2xl p-8">
                        <h2 class="text-2xl font-bold mb-6">Usage Statistics</h2>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="bg-white/5 rounded-lg p-6">
                                <h3 class="font-semibold mb-4">API Requests (Last 7 Days)</h3>
                                <canvas id="requests-chart"></canvas>
                            </div>
                            <div class="bg-white/5 rounded-lg p-6">
                                <h3 class="font-semibold mb-4">Agent Usage</h3>
                                <canvas id="agents-chart"></canvas>
                            </div>
                        </div>

                        <div class="bg-white/5 rounded-lg p-6">
                            <h3 class="font-semibold mb-4">Usage Details</h3>
                            <div class="space-y-3 text-sm">
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-400">Total Requests (30d)</span>
                                    <span class="font-semibold">7,842</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-400">Avg Response Time</span>
                                    <span class="font-semibold">142ms</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-400">Success Rate</span>
                                    <span class="font-semibold text-green-400">99.2%</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-400">Most Used Agent</span>
                                    <span class="font-semibold">Kael (Codex)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="tab-settings" class="tab-content hidden">
                    <div class="glass-card rounded-2xl p-8">
                        <h2 class="text-2xl font-bold mb-6">Account Settings</h2>

                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium mb-2">Full Name</label>
                                <input type="text" id="settings-name" class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-teal-500" placeholder="Your name">
                            </div>

                            <div>
                                <label class="block text-sm font-medium mb-2">Email Address</label>
                                <input type="email" id="settings-email" class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-teal-500" placeholder="you@example.com">
                            </div>

                            <div>
                                <label class="block text-sm font-medium mb-2">Notifications</label>
                                <div class="space-y-3">
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" class="mr-3 w-4 h-4 rounded" checked>
                                        <span>Email notifications for usage alerts</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" class="mr-3 w-4 h-4 rounded" checked>
                                        <span>Weekly usage reports</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" class="mr-3 w-4 h-4 rounded">
                                        <span>Product updates and announcements</span>
                                    </label>
                                </div>
                            </div>

                            <button onclick="saveSettings()" class="py-3 px-6 bg-gradient-to-r from-teal-500 to-blue-600 hover:from-teal-600 hover:to-blue-700 rounded-lg font-semibold transition">
                                <i class="fas fa-save mr-2"></i>Save Changes
                            </button>

                            <div class="border-t border-white/10 pt-6 mt-6">
                                <h3 class="font-semibold text-red-400 mb-3">Danger Zone</h3>
                                <button onclick="deleteAccount()" class="py-3 px-6 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg font-semibold transition border border-red-500/50">
                                    <i class="fas fa-trash mr-2"></i>Delete Account
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let actualAPIKey = '';
        let isAPIKeyVisible = false;

        // Load user data
        function loadUserData() {
            const userData = JSON.parse(localStorage.getItem('helix_user_data') || '{}');

            if (!userData.email) {
                window.location.href = 'login.html';
                return;
            }

            document.getElementById('user-name-display').textContent = userData.name || 'User';
            document.getElementById('user-email-display').textContent = userData.email;
            document.getElementById('settings-name').value = userData.name || '';
            document.getElementById('settings-email').value = userData.email || '';

            const plan = userData.subscription || 'free';
            document.getElementById('plan-badge').textContent = plan.toUpperCase() + ' PLAN';
            document.getElementById('current-plan').textContent = plan.charAt(0).toUpperCase() + plan.slice(1) + ' Plan';

            actualAPIKey = userData.api_key || 'hx_demo_key_' + Math.random().toString(36).substr(2, 24);
        }

        // Switch tabs
        function switchTab(tab) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('.tab-button').forEach(el => el.classList.remove('active'));

            document.getElementById(`tab-${tab}`).classList.remove('hidden');
            event.target.classList.add('active');

            if (tab === 'usage') {
                setTimeout(renderCharts, 100);
            }
        }

        // Toggle API key visibility
        function toggleAPIKey() {
            isAPIKeyVisible = !isAPIKeyVisible;
            const display = document.getElementById('api-key-value');
            const icon = document.getElementById('api-key-toggle-icon');

            if (isAPIKeyVisible) {
                display.textContent = actualAPIKey;
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                display.textContent = 'hx_â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        // Copy API key
        function copyAPIKey() {
            navigator.clipboard.writeText(actualAPIKey);
            alert('API key copied to clipboard!');
        }

        // Generate new API key
        function generateNewKey() {
            if (confirm('Are you sure? This will invalidate your current API key.')) {
                actualAPIKey = 'hx_' + Math.random().toString(36).substr(2, 32);
                alert('New API key generated!');

                const userData = JSON.parse(localStorage.getItem('helix_user_data'));
                userData.api_key = actualAPIKey;
                localStorage.setItem('helix_user_data', JSON.stringify(userData));
            }
        }

        // Save settings
        function saveSettings() {
            const name = document.getElementById('settings-name').value;
            const email = document.getElementById('settings-email').value;

            const userData = JSON.parse(localStorage.getItem('helix_user_data'));
            userData.name = name;
            userData.email = email;
            localStorage.setItem('helix_user_data', JSON.stringify(userData));

            alert('Settings saved successfully!');
            loadUserData();
        }

        // Delete account
        function deleteAccount() {
            if (confirm('Are you absolutely sure? This action cannot be undone.')) {
                if (confirm('Last chance! Delete your account permanently?')) {
                    localStorage.removeItem('helix_auth_token');
                    localStorage.removeItem('helix_user_data');
                    window.location.href = 'dashboard.html';
                }
            }
        }

        // Logout
        function logout() {
            localStorage.removeItem('helix_auth_token');
            localStorage.removeItem('helix_user_data');
            window.location.href = 'dashboard.html';
        }

        // Render usage charts
        function renderCharts() {
            // Requests chart
            const requestsCtx = document.getElementById('requests-chart').getContext('2d');
            new Chart(requestsCtx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'API Requests',
                        data: [120, 190, 170, 250, 200, 180, 247],
                        borderColor: '#00bfa5',
                        backgroundColor: 'rgba(0, 191, 165, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#888' } },
                        x: { grid: { display: false }, ticks: { color: '#888' } }
                    }
                }
            });

            // Agents chart
            const agentsCtx = document.getElementById('agents-chart').getContext('2d');
            new Chart(agentsCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Kael', 'Lumina', 'Oracle'],
                    datasets: [{
                        data: [45, 30, 25],
                        backgroundColor: ['#00bfa5', '#667eea', '#764ba2']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'bottom', labels: { color: '#888' } } }
                }
            });
        }

        // Initialize
        loadUserData();
    </script>
</body>
</html>
